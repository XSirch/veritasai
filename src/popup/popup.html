<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VeritasAI - Configura√ß√µes</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header -->
    <header class="popup-header">
      <div class="header-content">
        <span class="logo" aria-hidden="true">üõ°Ô∏è</span>
        <h1 class="title">VeritasAI</h1>
        <span class="version">v1.0.21</span>
      </div>
      <p class="subtitle">Configura√ß√µes da Extens√£o</p>
    </header>

    <!-- Main Content -->
    <main class="popup-main">
      <!-- Status Section -->
      <section class="status-section" aria-labelledby="status-title">
        <h2 id="status-title" class="section-title">
          <span class="section-icon" aria-hidden="true">üìä</span>
          Status do Sistema
        </h2>
        <div class="status-grid">
          <div class="status-item">
            <span class="status-label">Extens√£o:</span>
            <span class="status-value" id="extension-status">
              <span class="status-indicator active"></span>
              Ativa
            </span>
          </div>
          <div class="status-item">
            <span class="status-label">APIs:</span>
            <span class="status-value" id="api-status">
              <span class="status-indicator pending"></span>
              Configurando...
            </span>
          </div>
        </div>
      </section>

      <!-- API Keys Section -->
      <section class="api-section" aria-labelledby="api-title">
        <h2 id="api-title" class="section-title">
          <span class="section-icon" aria-hidden="true">ü§ñ</span>
          Configura√ß√£o Groq AI
        </h2>

        <!-- Removido Google API - usando apenas Groq AI -->

        <!-- Groq API -->
        <div class="api-group">
          <label for="groq-api-key" class="api-label">
            <span class="api-name">Groq AI API Key</span>
            <span class="api-required">*</span>
          </label>
          <div class="input-group">
            <input
              type="password"
              id="groq-api-key"
              class="api-input"
              placeholder="Insira sua chave da API do Groq"
              aria-describedby="groq-api-help"
              autocomplete="off"
            >
            <button
              type="button"
              class="toggle-visibility"
              aria-label="Mostrar/ocultar chave"
              data-target="groq-api-key"
            >
              <span class="visibility-icon" aria-hidden="true">üëÅÔ∏è</span>
            </button>
            <button
              type="button"
              class="test-api"
              aria-label="Testar chave da API"
              data-api="groq"
              disabled
            >
              <span class="test-icon" aria-hidden="true">üß™</span>
            </button>
          </div>
          <div class="api-status" id="groq-api-status"></div>
          <p id="groq-api-help" class="api-help">
            Obtenha sua chave em:
            <a href="https://console.groq.com/keys" target="_blank" rel="noopener">
              Groq Console
            </a>
          </p>
        </div>

        <!-- Groq Model Selection -->
        <div class="api-group">
          <label for="groq-model-select" class="api-label">
            <span class="api-name">Modelo Groq AI</span>
          </label>
          <select id="groq-model-select" class="api-select">
            <option value="llama-3.1-8b-instant">Llama 3.1 8B Instant (R√°pido - Recomendado)</option>
            <option value="llama3-70b-8192">Llama 3 70B (Balanceado)</option>
            <option value="gemma2-9b-it">Gemma 2 9B (Eficiente)</option>
          </select>
          <p class="api-help">
            Escolha o modelo de IA para verifica√ß√£o. Llama 3 70B oferece melhor qualidade.
          </p>
        </div>
      </section>

      <!-- Embedding APIs Section -->
      <section class="api-section">
        <h2 class="section-title">
          <span class="section-icon">üîó</span>
          APIs de Embeddings (Opcional)
        </h2>

        <div class="api-group">
          <label for="openai-api-key" class="api-label">OpenAI API Key</label>
          <input type="password" id="openai-api-key" class="api-input" placeholder="sk-...">
          <p class="api-help">Para embeddings de alta qualidade com text-embedding-3-small</p>
        </div>

        <div class="api-group">
          <label for="cohere-api-key" class="api-label">Cohere API Key</label>
          <input type="password" id="cohere-api-key" class="api-input" placeholder="co_...">
          <p class="api-help">API gratuita com 1000 requests/m√™s</p>
        </div>

        <div class="api-group">
          <label for="huggingface-api-key" class="api-label">Hugging Face API Key</label>
          <input type="password" id="huggingface-api-key" class="api-input" placeholder="hf_...">
          <p class="api-help">Token gratuito do Hugging Face Hub</p>
        </div>
      </section>

      <!-- Qdrant Vector Database Section -->
      <section class="api-section">
        <h2 class="section-title">
          <span class="section-icon">üß†</span>
          Cache Inteligente (Qdrant)
        </h2>

        <div class="api-group">
          <div class="api-status" id="qdrant-status">
            <span class="status-indicator loading"></span>
            <span class="status-text">Verificando conex√£o...</span>
          </div>

          <button id="qdrant-refresh" class="btn-secondary" style="margin-top: 8px; font-size: 12px; padding: 4px 8px;">
            üîÑ Atualizar Status
          </button>

          <div id="qdrant-details" class="qdrant-details" style="display: none;">
            <div class="qdrant-info">
              <div class="qdrant-stat">
                <span class="stat-label">Itens no cache:</span>
                <span class="stat-value" id="qdrant-items">-</span>
              </div>
              <div class="qdrant-stat">
                <span class="stat-label">Threshold similaridade:</span>
                <span class="stat-value" id="qdrant-threshold">-</span>
              </div>
              <div class="qdrant-stat">
                <span class="stat-label">Status da cole√ß√£o:</span>
                <span class="stat-value" id="qdrant-collection-status">-</span>
              </div>
            </div>
          </div>

          <p class="api-help">
            O cache inteligente usa similaridade sem√¢ntica para fornecer respostas mais r√°pidas para conte√∫do similar j√° verificado.
            <br><strong>Opcional:</strong> Funciona sem Qdrant, usando apenas o LLM.
            <br><small>Para ativar: <code>docker run -p 6333:6333 qdrant/qdrant</code></small>
          </p>
        </div>
      </section>

      <!-- Preferences Section -->
      <section class="preferences-section" aria-labelledby="preferences-title">
        <h2 id="preferences-title" class="section-title">
          <span class="section-icon" aria-hidden="true">‚öôÔ∏è</span>
          Prefer√™ncias
        </h2>

        <div class="preferences-grid">
          <!-- Language -->
          <div class="preference-group">
            <label for="language-select" class="preference-label">Idioma da Interface</label>
            <select id="language-select" class="preference-select">
              <option value="pt-BR">Portugu√™s (Brasil)</option>
              <option value="en-US">English (US)</option>
              <option value="es-ES">Espa√±ol</option>
            </select>
          </div>

          <!-- Theme -->
          <div class="preference-group">
            <label for="theme-select" class="preference-label">Tema</label>
            <select id="theme-select" class="preference-select">
              <option value="auto">Autom√°tico</option>
              <option value="light">Claro</option>
              <option value="dark">Escuro</option>
            </select>
          </div>

          <!-- Notifications -->
          <div class="preference-group">
            <label class="preference-label">Notifica√ß√µes</label>
            <div class="checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" id="notifications-enabled" class="preference-checkbox">
                <span class="checkbox-custom"></span>
                <span class="checkbox-text">Ativar notifica√ß√µes</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="sound-enabled" class="preference-checkbox">
                <span class="checkbox-custom"></span>
                <span class="checkbox-text">Sons de notifica√ß√£o</span>
              </label>
            </div>
          </div>

          <!-- Performance -->
          <div class="preference-group">
            <label class="preference-label">Performance</label>
            <div class="checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" id="auto-verify" class="preference-checkbox">
                <span class="checkbox-custom"></span>
                <span class="checkbox-text">Verifica√ß√£o autom√°tica</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="cache-enabled" class="preference-checkbox" checked>
                <span class="checkbox-custom"></span>
                <span class="checkbox-text">Cache de resultados</span>
              </label>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer Actions -->
    <footer class="popup-footer">
      <div class="footer-actions">
        <button type="button" class="action-btn secondary" id="reset-btn">
          <span class="btn-icon" aria-hidden="true">üîÑ</span>
          <span class="btn-text">Restaurar</span>
        </button>

        <button type="button" class="action-btn primary" id="save-btn">
          <span class="btn-icon" aria-hidden="true">üíæ</span>
          <span class="btn-text">Salvar</span>
        </button>
      </div>

      <div class="footer-info">
        <p class="save-status" id="save-status"></p>
      </div>
    </footer>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loading-overlay" hidden>
    <div class="loading-content">
      <div class="loading-spinner" aria-hidden="true"></div>
      <p class="loading-text" id="loading-text">Carregando...</p>
    </div>
  </div>

  <!-- Toast Notifications -->
  <div class="toast-container" id="toast-container" aria-live="polite"></div>

  <script src="popup.js"></script>
</body>
</html>

